{
  "total": {{ if get:category && get:category != 'all' }}
              {{ collection:posts :search="get:q" :taxonomy:categories="get:category" paginate="true" limit="1" }}{{ paginate:total_items }}{{ /collection:posts }}
            {{ else }}
              {{ collection:posts :search="get:q" paginate="true" limit="1" }}{{ paginate:total_items }}{{ /collection:posts }}
            {{ /if }},
  "posts": [
    {{ if get:category && get:category != 'all' }}
      {{ collection:posts :limit="get:limit" :offset="get:offset" :sort="get:sort" :search="get:q" :taxonomy:categories="get:category" }}
    {{ else }}
      {{ collection:posts :limit="get:limit" :offset="get:offset" :sort="get:sort" :search="get:q" }}
    {{ /if }}
    {
      "id": "{{ id }}",
      "title": "{{ title | entities }}",
      "url": "{{ url }}",
      "date": "{{ date format='Y-m-d' }}",
      "featured_image": "{{ featured_image }}",
      "excerpt": "{{ content | raw | flatten | join | strip_tags | safe_truncate:160 | entities }}",
      "categories": [
        {{ categories }}
        { "slug": "{{ slug }}", "title": "{{ title | entities }}" }{{ unless last }},{{ /unless }}
        {{ /categories }}
      ],
      "author": null
    }{{ unless last }},{{ /unless }}
    {{ if get:category && get:category != 'all' }}{{ /collection:posts }}{{ else }}{{ /collection:posts }}{{ /if }}
  ]
}

